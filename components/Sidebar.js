import{jsxs as o,jsx as e}from"react/jsx-runtime";import{useState as r,useEffect as i}from"react";import{useColorMode as t,VStack as a,Flex as n,InputGroup as l,InputLeftElement as s,Icon as c,Input as d,Divider as f,IconButton as g}from"@chakra-ui/react";import{RiSearch2Line as m,RiMoonLine as p,RiSunLine as h}from"react-icons/ri";import{ProfileButton as v}from"./ProfileButton.js";import{ChatSidebarPreview as u}from"./rooms/ChatSidebarPreview.js";import{useLocalStorage as b}from"@strata-foundation/react";import{VISIBLE_CHATS as C}from"../constants/globals.js";import{useRouter as w}from"next/router";import{useChat as j}from"../hooks/useChat.js";import{useChatKeyFromIdentifier as x}from"../hooks/useChatKeyFromIdentifier.js";import{CreateChatButton as y}from"./CreateChat/CreateChatButton.js";const O={bg:"gray.900"},k=k=>{const[S,M]=r(""),{colorMode:B,toggleColorMode:z}=t(),[K,P]=b("chats",C),T=w(),{id:Y}=T.query,{chatKey:q,loading:D}=x(Y),{info:E}=j(q);i((()=>{C.some((o=>-1===K.indexOf(o)))&&P([...new Set([...K,...C])])}),[K,P]),i((()=>{E&&Y&&-1===K.indexOf(Y)&&P([...new Set([...K,Y])])}),[P,K,E,Y]);return o(a,Object.assign({position:"relative",h:"full",grow:1,as:"nav",pos:"fixed",top:"0",left:"0",overflowX:"hidden",overflowY:"auto",bg:"white",_dark:O,color:"inherit",borderRightWidth:"1px",w:"80",pt:3,pb:0,gap:1},k,{children:[o(n,Object.assign({gap:2,px:4,pb:2,w:"full"},{children:[o(l,{children:[e(s,Object.assign({pointerEvents:"none"},{children:e(c,{as:m},void 0)}),void 0),e(d,{type:"search",variant:"filled",placeholder:"Search",value:S,onChange:o=>{const e=o.currentTarget.value;M(e)}},void 0)]},void 0),e(y,{colorScheme:"gray",rounded:"full",variant:"outline","aria-label":"Create Chat Button"},void 0)]}),void 0),e(n,Object.assign({direction:"column",as:"nav",w:"full",px:4,fontSize:"sm",color:"gray.600","aria-label":"Main Navigation",grow:1,gap:2,overflowY:"scroll"},{children:K.filter((o=>o.includes(S))).map((o=>e(u,{identifier:o,onClick:()=>{M(""),k.onClose&&k.onClose()}},o)))}),void 0),o(a,Object.assign({w:"full",gap:0,spacing:0,px:0},{children:[e(f,{},void 0),e(g,{w:"full",colorScheme:"gray",variant:"ghost",rounded:"none","aria-label":"Toggle Dark Mode",icon:e(c,"light"===B?{as:p}:{as:h},void 0),onClick:z},void 0),e(f,{},void 0),e(n,Object.assign({align:"center",justifyContent:"space-evenly",w:"full"},{children:e(v,{size:"lg"},void 0)}),void 0)]}),void 0)]}),void 0)};export{k as Sidebar};
//# sourceMappingURL=Sidebar.js.map
