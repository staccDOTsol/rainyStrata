import{jsx as e,jsxs as o,Fragment as t}from"react/jsx-runtime";import{useRef as n,useEffect as i,useState as r,useCallback as s}from"react";import{useColorModeValue as c,Flex as d,Fade as a}from"@chakra-ui/react";import l from"@emoji-mart/data";import{useErrorHandler as f}from"@strata-foundation/react";import{MessageType as u}from"@strata-foundation/chat";import{BrowserView as h,MobileView as m}from"react-device-detect";import{useEmojis as p}from"../contexts/emojis.js";import{useSendMessage as b}from"../contexts/sendMessage.js";const g=o=>{const t=n(),r=n();return i((()=>{t.current&&t.current.firstChild&&(o.noBoxShadow&&(t.current.firstChild.style.boxShadow="none"),o.autoFocus&&t.current.firstChild.shadowRoot.querySelector('input[type="search"]')?.focus())}),[o]),e("div",{ref:e=>{t.current=e,r.current||(r.current=import("emoji-mart").then((e=>new e.Picker({...o,ref:t,data:l}))))}},void 0)},v=({chatKey:n})=>{const[l,v]=r(),{referenceMessageId:j,hidePicker:x}=p(),w=c("243 244 246","32 41 55"),y=c("white","black"),C=c("255 255 255","56 63 75"),k=c("#e4e7eb",""),{handleErrors:P}=f(),{sendMessage:O,error:I}=b();P(I);const S=s((()=>{v(void 0),x()}),[x,v]),M=e=>{e.preventDefault(),e.stopPropagation()};return i((()=>{l&&(O({message:{type:u.React,emoji:l.native,referenceMessageId:j}}),S())}),[l,j,S,O]),o(t,{children:[e(h,{children:e(d,Object.assign({w:j?"full":"none",h:j?"full":"none",position:"absolute",top:"0",right:"0",zIndex:"1",justifyContent:"end",onClick:S},{children:e(a,Object.assign({in:!!j},{children:e(d,Object.assign({display:j?"flex":"none",onClick:M,sx:{"--rgb-color":y,"--rgb-background":w,"--rgb-input":C,"--color-border":k}},{children:e(d,Object.assign({bg:`rgb(${w})`},{children:e(g,{onEmojiSelect:v,previewPosition:"none",searchPosition:"top",navPosition:"bottom",autoFocus:!0},void 0)}),void 0)}),void 0)}),void 0)}),void 0)},void 0),e(m,{children:e(d,Object.assign({w:j?"full":"none",h:j?"full":"none",position:"fixed",top:"0",zIndex:"15",justifyContent:"center"},{children:e(a,Object.assign({in:!!j,style:{width:"100%"}},{children:o(d,Object.assign({display:j?"flex":"none",onClick:S,zIndex:"15",w:"full",h:"full",justifyContent:"flex-end",alignItems:"end",flexDirection:"column",position:"absolute",left:"0",sx:{"--rgb-color":y,"--rgb-background":w,"--rgb-input":C,"--color-border":k}},{children:[e(d,{flexGrow:2},void 0),e(d,Object.assign({w:"full",onClick:M,flexGrow:0,justifyContent:"center",position:"absolute",left:"0",bg:`rgb(${w})`},{children:e(g,{onEmojiSelect:v,previewPosition:"none",searchPosition:"top",navPosition:"bottom",noBoxShadow:!0},void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0)]},void 0)};export{g as EmojiPicker,v as EmojiPickerPopover};
//# sourceMappingURL=EmojiPicker.js.map
