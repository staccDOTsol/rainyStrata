{"version":3,"file":"Chatbox.js","sources":["../../../src/components/chatbox/Chatbox.tsx"],"sourcesContent":[null],"names":["converter","Converter","simpleLineBreaks","popoverWidth","base","md","Chatbox","chatKey","onAddPendingMessage","inputOnAddPendingMessage","files","setFiles","onUploadFile","inputRef","useRef","input","setInput","useState","emojis","search","searchMatch","reset","resetEmoji","useEmojiSearch","isOpen","isGifyOpen","onToggle","onToggleGify","onClose","onCloseGify","useDisclosure","gaEventTracker","useAnalyticsEventTracker","info","chatPermissions","useChatPermissionsFromChat","metadata","useTokenMetadata","readPermissionKey","readMint","useMint","chatBg","useColorModeValue","handleErrors","useErrorHandler","isPermissionModalOpen","onPermissionsClose","onOpen","onPermissionsOpen","readPermissionInputAmount","setReadPermissionInputAmount","useEffect","toNumber","defaultReadPermissionAmount","toString","readPermissionAmount","setReadPermissionAmount","loading","setLoading","sendMessage","sendMessageImpl","error","useSendMessage","onCancelFile","useCallback","file","filter","f","replyMessage","hideReply","useReply","current","focus","msg","execute","useAsyncCallback","async","m","id","referenceMessageId","msgArgs","message","toBN","undefined","fileAttachments","length","text","map","name","toast","custom","t","_jsx","LongPromiseNotification","estTimeMillis","onError","e","dismiss","exec","onComplete","duration","Infinity","action","handleChange","content","currentTarget","value","handleKeyDown","ev","key","shiftKey","preventDefault","type","MessageType","Html","html","makeHtml","replace","style","height","scrollHeight","handleSendClick","_jsxs","Flex","direction","position","bottom","p","w","minH","Popover","matchWidth","placement","autoFocus","closeOnBlur","children","PopoverTrigger","PopoverContent","Object","assign","bg","border","PopoverBody","px","pt","VStack","spacing","align","Text","fontSize","fontWeight","textTransform","lineHeight","as","Divider","indx","HStack","onClick","handleEmojiClick","native","skins","reduce","acc","string","_hover","cursor","_dark","rounded","Files","alignItems","Icon","AiFillLock","data","symbol","CloseButton","color","ReplyBar","ChatInput","onChange","onKeyDown","Menu","isLazy","MenuButton","IconButton","isLoading","variant","icon","h","AiOutlinePlus","MenuList","MenuItem","mt","IoMdAttach","AiOutlineGif","Button","colorScheme","isDisabled","AiOutlineSend","Modal","size","isCentered","trapFocus","ModalOverlay","ModalContent","borderRadius","shadow","ModalHeader","ModalCloseButton","ModalBody","GifSearch","onSelect","gifyId","Gify","pb","InputGroup","Input","borderRight","target","step","Math","pow","decimals","InputRightAddon","Number"],"mappings":"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"}